<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Buy Button Integration Example</title>
    <style>
        .widgets {
            display: flex;
            flex-wrap: wrap;
        }

        .x-buy-button-widget {
            box-shadow: 0 2px 3px 0 rgba(0, 0, 0, .55);
            display: inline-block;
            margin: 20px;
        }
    </style>
</head>
<body>

<div class="widgets">
    <div id="widget-example-green">
    </div>

    <div id="widget-example-blue">
    </div>

    <div id="widget-example-red">
    </div>

    <div id="widget-example-gold">
    </div>

    <div id="widget-example-gold-drm">
    </div>

    <div id="widget-example-gold-locale-email">
    </div>

    <div id="widget-example-gold-access-data">
    </div>

    <div id="widget-example-gold-auth">
    </div>

    <div id="widget-example-physical">
    </div>

    <div id="widget-example-free-virtual-item">
    </div>

    <div id="widget-example-unit">
    </div>
</div>

<script>

    var options_digital_content_basic = {
        project_id: 20421,
        sku: "1",
    };

    var options_digital_content_with_drm = {
        project_id: 20421,
        sku: "1",
        drm: "steam"
    };

    var options_digital_content_with_custom_locale_and_email = {
        project_id: 20421,
        sku: "1",
        user: {
            locale: "de"
        },
        access_data: {
            user: {
                email: {
                    value: "support@xsolla.com"
                }
            }
        }
    };

    var options_digital_content_with_auth = {
        project_id: 48243,
        sku: "2"
    };

    var options_digital_content_with_access_data_settings = {
        project_id: 20421,
        sku: "1",
        access_data: {
            user: {
                email: {
                    value: "support@xsolla.com"
                }
            },
            settings: {
                xsolla_product_tag: "test_attribution"
            }
        }
    };

    var options_physical_good_basic = {
        project_id: 44056,
        sku: "kicker_shirt_1",
        item_type: "physical_good"
    };

    var options_free_virtual_item_basic = {
        project_id: 44056,
        sku: "lootbox_max",
        item_type: "virtual_item"
    };

    var options_unit_basic = {
        project_id: 44056,
        sku: "xsollus_deluxe_edition",
        item_type: "unit"
    };

    var s = document.createElement('script');
    s.type = "text/javascript";
    s.async = true;
    s.src = "./../dist/widget.js";
    s.addEventListener('load', function (e) {
      var greenWidget = XBuyButtonWidget.create(Object.assign({
            widget_ui: {
                theme: {
                    foreground: XBuyButtonWidget.foregroundTypes.GREEN,
                    background: XBuyButtonWidget.backgroundTypes.LIGHT
                },
                target_element: '#widget-example-green'
            }
        }, options_digital_content_basic));

        var blueWidget = XBuyButtonWidget.create(Object.assign({
            widget_ui: {
                theme: {
                    foreground: XBuyButtonWidget.foregroundTypes.BLUE,
                    background: XBuyButtonWidget.backgroundTypes.LIGHT
                },
                target_element: '#widget-example-blue'
            }
        }, options_digital_content_basic));

        var redWidget = XBuyButtonWidget.create(Object.assign({
            widget_ui: {
                theme: {
                    foreground: XBuyButtonWidget.foregroundTypes.RED,
                    background: XBuyButtonWidget.backgroundTypes.DARK
                },
                target_element: '#widget-example-red'
            }
        }, options_digital_content_basic));

        var goldWidget = XBuyButtonWidget.create(Object.assign({
            widget_ui: {
                theme: {
                    foreground: XBuyButtonWidget.foregroundTypes.GOLD,
                    background: XBuyButtonWidget.backgroundTypes.DARK
                },
                target_element: '#widget-example-gold'
            }
        }, options_digital_content_basic));

        var goldWidgetDrm = XBuyButtonWidget.create(Object.assign({
            widget_ui: {
                theme: {
                    foreground: XBuyButtonWidget.foregroundTypes.GOLD,
                    background: XBuyButtonWidget.backgroundTypes.LIGHT
                },
                target_element: '#widget-example-gold-drm'
            }
        }, options_digital_content_with_drm));

        var goldWidgetCustomLocaleAndEmail = XBuyButtonWidget.create(Object.assign({
            widget_ui: {
                theme: {
                    foreground: XBuyButtonWidget.foregroundTypes.GOLD,
                    background: XBuyButtonWidget.backgroundTypes.LIGHT
                },
                target_element: '#widget-example-gold-locale-email'
            }
        }, options_digital_content_with_custom_locale_and_email));


        var goldWidgetAccessData = XBuyButtonWidget.create(Object.assign({
            widget_ui: {
                theme: {
                    foreground: XBuyButtonWidget.foregroundTypes.GOLD,
                    background: XBuyButtonWidget.backgroundTypes.LIGHT
                },
                target_element: '#widget-example-gold-access-data'
            }
        }, options_digital_content_with_access_data_settings));

        var goldWidgetAuth = XBuyButtonWidget.create(Object.assign({
            widget_ui: {
                theme: {
                    foreground: XBuyButtonWidget.foregroundTypes.GOLD,
                    background: XBuyButtonWidget.backgroundTypes.DARK
                },
                target_element: '#widget-example-gold-auth'
            }
        }, options_digital_content_with_auth));

        var widgetPhysical = XBuyButtonWidget.create(Object.assign({
            widget_ui: {
                theme: {
                    foreground: XBuyButtonWidget.foregroundTypes.GOLD,
                    background: XBuyButtonWidget.backgroundTypes.DARK
                },
                target_element: '#widget-example-physical'
            }
        }, options_physical_good_basic));

        var widgetFreeVirtualItem = XBuyButtonWidget.create(Object.assign({
            widget_ui: {
                theme: {
                    foreground: XBuyButtonWidget.foregroundTypes.GOLD,
                    background: XBuyButtonWidget.backgroundTypes.DARK
                },
                target_element: '#widget-example-free-virtual-item'
            }
        }, options_free_virtual_item_basic));

        var widgetUnit = XBuyButtonWidget.create(Object.assign({
            widget_ui: {
                theme: {
                    foreground: XBuyButtonWidget.foregroundTypes.GOLD,
                    background: XBuyButtonWidget.backgroundTypes.DARK
                },
                target_element: '#widget-example-unit'
            }
        }, options_unit_basic));

        [
            greenWidget,
            blueWidget,
            redWidget,
            goldWidget,
            goldWidgetDrm,
            goldWidgetCustomLocaleAndEmail,
            goldWidgetAccessData,
            goldWidgetAuth,
            widgetPhysical,
            widgetFreeVirtualItem,
            widgetUnit
        ].forEach(
            function (widgetInstance) {
                widgetInstance.on(
                    Object.keys(XBuyButtonWidget.eventTypes)
                        .map(function (k) {
                            return XBuyButtonWidget.eventTypes[k];
                        })
                        .join(' '),
                    function (event) {
                        console.log(event.type);
                    }
                );
            }
        );
    }, false);
    var head = document.getElementsByTagName('head')[0];
    head.appendChild(s);
</script>
</body>
</html>
